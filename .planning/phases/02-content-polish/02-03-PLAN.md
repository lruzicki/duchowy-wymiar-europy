---
phase: 02-content-polish
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/routes/__root.tsx
autonomous: true
requirements: [BRAND-01, BRAND-03]

must_haves:
  truths:
    - "Browser tab title shows 'Duchowy Wymiar Europy' not 'TanStack Start Starter'"
    - "Meta description is set to describe the foundation"
    - "Open Graph og:title and og:description tags are present in the HTML head"
    - "TanStack DevTools panels do not appear when VITE_DEV is false or in production build"
  artifacts:
    - path: "src/routes/__root.tsx"
      provides: "Updated head meta with correct title, description, OG tags + devtools gated by import.meta.env.DEV"
      contains: "Duchowy Wymiar Europy"
  key_links:
    - from: "src/routes/__root.tsx"
      to: "TanStackDevtools component"
      via: "import.meta.env.DEV conditional render"
      pattern: "import\\.meta\\.env\\.DEV"
---

<objective>
Update site branding in the root layout: correct the page title, add meta description and Open Graph tags, and gate TanStack DevTools so they only appear in development mode.

Purpose: Required for BRAND-01 (correct title/meta) and BRAND-03 (no devtools in production). Quick, self-contained changes to __root.tsx only — no vite.config.ts changes are needed since `import.meta.env.DEV` is standard Vite behavior.
Output: Updated __root.tsx with proper head tags and conditional devtools.
</objective>

<execution_context>
@/home/lucas/.claude/get-shit-done/workflows/execute-plan.md
@/home/lucas/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/routes/__root.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update meta tags — title, description, Open Graph</name>
  <files>src/routes/__root.tsx</files>
  <action>
    In `src/routes/__root.tsx`, update the `head()` return in `createRootRoute`:

    Replace the existing meta array with:
    ```ts
    head: () => ({
      meta: [
        { charSet: 'utf-8' },
        { name: 'viewport', content: 'width=device-width, initial-scale=1' },
        { title: 'Duchowy Wymiar Europy' },
        { name: 'description', content: 'Fundacja Duchowy Wymiar Europy — Sumienie. Solidarność. Odpowiedzialność. Pomagamy ofiarom wojny na Ukrainie i więźniom politycznym od 2008 roku.' },
        { property: 'og:title', content: 'Duchowy Wymiar Europy' },
        { property: 'og:description', content: 'Fundacja Duchowy Wymiar Europy — Sumienie. Solidarność. Odpowiedzialność. Pomagamy ofiarom wojny na Ukrainie i więźniom politycznym od 2008 roku.' },
        { property: 'og:type', content: 'website' },
        { property: 'og:image', content: '/images/locations/data/zdjecie-o-fundacji.jpg' },
      ],
      links: [
        { rel: 'stylesheet', href: appCss },
      ],
    }),
    ```

    TanStack Start uses `{ title: '...' }` shape (not `{ name: 'title', ... }`). The existing meta entry `{ title: 'TanStack Start Starter' }` confirms this pattern. Open Graph properties use `property` key (not `name`).

    Keep all existing imports unchanged.
  </action>
  <verify>Run `pnpm dev`, open http://localhost:3000, inspect browser tab — it must show "Duchowy Wymiar Europy". View page source or DevTools Elements tab — `<title>Duchowy Wymiar Europy</title>`, `<meta name="description" ...>`, and `<meta property="og:title" ...>` must all be present in `<head>`.</verify>
  <done>Browser tab shows "Duchowy Wymiar Europy". Page source has correct title, description meta, and og:title/og:description/og:type/og:image meta tags.</done>
</task>

<task type="auto">
  <name>Task 2: Gate TanStack DevTools to development mode only</name>
  <files>src/routes/__root.tsx</files>
  <action>
    In the `RootDocument` function in `src/routes/__root.tsx`, wrap the `<TanStackDevtools>` component with a development-mode guard.

    Change from:
    ```tsx
    <TanStackDevtools ... />
    ```

    To:
    ```tsx
    {import.meta.env.DEV && (
      <TanStackDevtools
        config={{ position: 'bottom-right' }}
        plugins={[
          {
            name: 'Tanstack Router',
            render: <TanStackRouterDevtoolsPanel />,
          },
        ]}
      />
    )}
    ```

    `import.meta.env.DEV` is `true` during `pnpm dev` (Vite dev server) and `false` in `pnpm build` production output. No additional configuration needed — this is standard Vite environment variable behavior. No changes to vite.config.ts are needed.

    Keep the imports for `TanStackRouterDevtoolsPanel` and `TanStackDevtools` at the top of the file — they will be tree-shaken in production builds since the conditional is evaluated at build time by Vite. If TypeScript complains about importing devtools unconditionally, that is acceptable — the import itself is not the concern, the render is.
  </action>
  <verify>Run `pnpm dev` and confirm devtools panel still appears in bottom-right corner (DEV=true). Then run `pnpm build` — build must complete without error. In the build output (`.output/` directory), search for "TanStackDevtools" string — it should be absent or minimized out. Alternatively, run `pnpm build && pnpm start` and confirm no devtools panel appears at http://localhost:3000.</verify>
  <done>`import.meta.env.DEV` conditional wraps the TanStackDevtools render. Devtools appear in dev, absent in production build. `pnpm build` completes successfully.</done>
</task>

</tasks>

<verification>
- Browser tab title is "Duchowy Wymiar Europy"
- Page source has `<meta name="description">` with foundation description
- Page source has `<meta property="og:title">`, `<meta property="og:description">`, `<meta property="og:image">`
- DevTools panel visible during `pnpm dev`
- `pnpm build` succeeds, DevTools panel absent in production
</verification>

<success_criteria>
Site branding is correct: title shows "Duchowy Wymiar Europy", meta description and OG tags are set. TanStack DevTools are gated to development mode only. Both BRAND-01 and BRAND-03 requirements are satisfied.
</success_criteria>

<output>
After completion, create `.planning/phases/02-content-polish/02-03-SUMMARY.md`
</output>
